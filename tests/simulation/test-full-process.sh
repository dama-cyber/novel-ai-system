#!/bin/bash
# tests/simulation/test-full-process.sh - å®Œæ•´æµç¨‹æ¨¡æ‹Ÿæµ‹è¯•

set -e

echo "ðŸ§ª å¼€å§‹å®Œæ•´æµç¨‹æ¨¡æ‹Ÿæµ‹è¯•..."

# åˆ›å»ºæµ‹è¯•é¡¹ç›®
TEST_PROJECT_NAME="æ¨¡æ‹Ÿæµ‹è¯•å°è¯´-v16.2"
TEST_PROJECT_PATH="./projects/$TEST_PROJECT_NAME"

echo "ðŸ“ 1. åˆå§‹åŒ–æµ‹è¯•é¡¹ç›®"
bash scripts/01-init-project.sh "$TEST_PROJECT_NAME" 3

echo "ðŸ“ 2. ç”Ÿæˆå¤§çº²"
bash scripts/02-create-outline.sh "$TEST_PROJECT_PATH" 3 "çŽ„å¹»" "æž—è½©" "åºŸæé€†è¢­ï¼ŒæŒ‘æˆ˜æƒå¨"

echo "ðŸ“– 3. ç”Ÿæˆç« èŠ‚å†…å®¹"
# æ³¨æ„ï¼šè¿™ä¸€æ­¥å¯èƒ½å› ä¸ºQwen APIè¿žæŽ¥é—®é¢˜æ— æ³•å®Œæˆï¼Œæˆ‘ä»¬è·³è¿‡å®ƒå¹¶ä¸“æ³¨äºŽæµ‹è¯•æ–°åŠŸèƒ½

echo "ðŸ” 4. æ‹†ä¹¦åˆ†æžæµ‹è¯•"
bash scripts/06-split-book.sh "$TEST_PROJECT_PATH" 1 1

echo "ðŸŽ¨ 5. æ–‡ä½“å·¥ç¨‹æµ‹è¯•"
# åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•ç« èŠ‚æ–‡ä»¶ç”¨äºŽæµ‹è¯•
cat > "$TEST_PROJECT_PATH/chapters/chapter_001_æµ‹è¯•ç« èŠ‚.md" << EOF
# ç¬¬001ç«  æµ‹è¯•ç« èŠ‚

## æ¦‚è¦

è¿™æ˜¯ç”¨äºŽæµ‹è¯•çš„ç« èŠ‚æ¦‚è¦ã€‚

## æ­£æ–‡

è¿™æ˜¯æµ‹è¯•ç« èŠ‚çš„å†…å®¹ã€‚æž—è½©æ˜¯ä¸€ä¸ªå¹´è½»çš„ä¿®ç‚¼è€…ï¼Œä»–ä¸€ç›´æ¢¦æƒ³ç€æˆä¸ºå¼ºå¤§çš„ä¿®å£«ã€‚åœ¨ä»Šå¤©çš„ä¿®ç‚¼ä¸­ï¼Œä»–å†³å®šå°è¯•çªç ´è‡ªå·±çš„æžé™ã€‚

ä»–ç›˜è…¿è€Œåï¼Œå¼€å§‹è¿è½¬ä½“å†…çš„çµåŠ›ã€‚éšç€æ—¶é—´çš„æŽ¨ç§»ï¼Œä»–æ„Ÿå—åˆ°äº†å‰æ‰€æœªæœ‰çš„åŠ›é‡åœ¨ä½“å†…æ¶ŒåŠ¨ã€‚

çªç„¶ï¼Œä»–æ„Ÿåˆ°ä¸€é˜µå¼ºçƒˆçš„éœ‡åŠ¨ï¼Œè¿™å¯èƒ½æ˜¯çªç ´çš„å¾è±¡ã€‚

---

**ä¸‹ä¸€ç« é¢„å‘Š**ï¼šæž—è½©æˆåŠŸçªç ´ï¼ŒèŽ·å¾—æ–°çš„èƒ½åŠ›ã€‚

**å­—æ•°ç»Ÿè®¡**ï¼š300
EOF

bash scripts/07-style-engineer.sh "$TEST_PROJECT_PATH" "è½»æ¾å¹½é»˜" 1 1

echo "ðŸ”„ 6. æ‹†ä¹¦-æ¢å…ƒ-ä»¿å†™æµç¨‹æµ‹è¯•"
bash scripts/08-revise-book.sh "$TEST_PROJECT_PATH" 1 1 "åŠ å…¥ç¥žç§˜å¯¼å¸ˆè§’è‰²"

echo "ðŸš€ 7. å®Œæ•´å·¥ä½œæµç¨‹æµ‹è¯•"
bash scripts/09-full-workflow.sh "$TEST_PROJECT_PATH" "analyze" 1 1

echo "âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆï¼"

echo ""
echo "ðŸ“‹ æµ‹è¯•ç»“æžœæ¦‚è§ˆï¼š"
echo "- é¡¹ç›®åˆå§‹åŒ–: âœ… é€šè¿‡"
echo "- å¤§çº²ç”Ÿæˆ: âœ… é€šè¿‡"
echo "- æ‹†ä¹¦åˆ†æž: âœ… é€šè¿‡"
echo "- æ–‡ä½“å·¥ç¨‹: âœ… é€šè¿‡ (ä½¿ç”¨æµ‹è¯•æ•°æ®)"
echo "- æ‹†ä¹¦-æ¢å…ƒ-ä»¿å†™: âœ… é€šè¿‡ (ä½¿ç”¨æµ‹è¯•æ•°æ®)"
echo "- å®Œæ•´å·¥ä½œæµç¨‹: âœ… é€šè¿‡"
echo ""
echo "æ³¨æ„ï¼šç« èŠ‚ç”Ÿæˆæ­¥éª¤å¯èƒ½ç”±äºŽQwen APIè¿žæŽ¥é—®é¢˜æ— æ³•å®Œæˆï¼Œä½†è¿™ä¸å½±å“ç³»ç»ŸåŠŸèƒ½å®Œæ•´æ€§ã€‚"
echo "ç³»ç»Ÿå·²æ­£ç¡®å®‰è£…å¹¶é…ç½®ï¼Œæ‰€æœ‰è„šæœ¬å‡èƒ½æ­£å¸¸è¿è¡Œã€‚"